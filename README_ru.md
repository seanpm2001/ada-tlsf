## Примерный план

### Спеки на формальную модель

Спеки на формальную модель нужны для формулировки и проверки основных свойств формальной модели.
На их основе будут сформулированы основные предикаты валидности формальной модели, которые будут затем
использоваться в Pre и Post устловиях в контрактах Spark-кода.

Так как менеждер памяти в основном работает со структурами в памяти, то лучше всего подойдёт **Alloy** для моделирвания
работы со структурами.

### Формальная модель

Формальная модель будет в виде набора Spark - packages.

#### Инварианты

1. Блоки памяти располагаются встык, без 'дыр' и без перекрытия. Это основной инвариант, обеспечивающий корректность структуры
   памяти.
2. В списках свободных блоков только свободные блоки. И каждый свободный блок находится в только одном списке свободных
   для соответствующего класса размеров.
3. Если нет свободных блоков конкретного класса размеров, то нет соответствующего списка свободных блоков.

Эти три инварианта (нужно подумать, может в них что-то избыточно) должны обеспечивать корректность структуры памяти: нет потерь
блоков памяти, нет утечек памяти, нет пустых списков свободных блоков.

Возможно потребуются ещё инварианты на локальные операции: агрегация свободных блоков памяти(при освобождении занятого)
и разделение свободного блока.

Ориентировочно для моделирования общей структуры будет использоватся формальная мапа, для списков просто формальные сеты.

### Свойства реального времени

Для доказательства строгой верхней границы на операции по аллокации/деаллокации будет использоваться механизм с тиками.
Каждая элементарная операция и выполнение тела цикла будут увеличивать счётчик тиков на 1, при выходе из каждой
функции/процедуры будет Post-условие на верхнюю границу дельты Tick - Tick'Old.

Это конечно, не даст количественной оценки на времянку, но докажет наличие строгого верхнего предела на время выполнения.
